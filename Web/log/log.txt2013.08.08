2013-08-08 15:38:45,105 [10] ERROR NHibernate.Util.ADOExceptionReporter [(null)] <(null)> - Incorrect syntax near the keyword 'If'.
Incorrect syntax near the keyword 'THEN'.
2013-08-08 15:38:45,150 [10] ERROR NHibernate.Util.ADOExceptionReporter [(null)] <(null)> - Incorrect syntax near the keyword 'If'.
Incorrect syntax near the keyword 'THEN'.
2013-08-08 15:38:45,151 [10] ERROR Portal.Modules.OrientalSails.Web.Admin.BookingView [(null)] <(null)> - Error when Page_Load in BookingView
NHibernate.ADOException: could not load an entity: [Portal.Modules.OrientalSails.Domain.Booking#13089][SQL: SELECT booking0_.Id as Id89_0_, booking0_.Deleted as Deleted89_0_, booking0_.IsApproved as IsApproved89_0_, booking0_.GroupNo as GroupNo89_0_, booking0_.CreatedBy as CreatedBy89_0_, booking0_.CreatedDate as CreatedD6_89_0_, booking0_.ModifiedBy as ModifiedBy89_0_, booking0_.ModifiedDate as Modified8_89_0_, booking0_.ConfirmedBy as Confirme9_89_0_, booking0_.PartnerId as PartnerId89_0_, booking0_.SaleId as SaleId89_0_, booking0_.StartDate as StartDate89_0_, booking0_.EndDate as EndDate89_0_, booking0_.CustomBookingId as CustomB14_89_0_, booking0_.Amended as Amended89_0_, booking0_.Status as Status89_0_, booking0_.AccountingStatus as Account17_89_0_, booking0_.AgencyCode as AgencyCode89_0_, booking0_.TripOption as TripOption89_0_, booking0_.Total as Total89_0_, booking0_.TotalVND as TotalVND89_0_, booking0_.IsVND as IsVND89_0_, booking0_.Commission as Commission89_0_, booking0_.ComUSDpayed as ComUSDp24_89_0_, booking0_.ComVNDPayed as ComVNDP25_89_0_, booking0_.ComRate as ComRate89_0_, booking0_.GuideCollect as GuideCo27_89_0_, booking0_.GuideCollected as GuideCo28_89_0_, booking0_.GuideCollectUSD as GuideCo29_89_0_, booking0_.GuideCollectVND as GuideCo30_89_0_, booking0_.ComPaid as ComPaid89_0_, booking0_.TransferCost as Transfe32_89_0_, booking0_.IsTransferred as IsTrans33_89_0_, booking0_.Paid as Paid89_0_, booking0_.Note as Note89_0_, booking0_.PickupAddress as PickupA36_89_0_, booking0_.DropoffAddress as Dropoff37_89_0_, booking0_.SpecialRequest as Special38_89_0_, booking0_.BookerId as BookerId89_0_, booking0_.CurrencyRate as Currenc40_89_0_, booking0_.PaidBase as PaidBase89_0_, booking0_.IsPaid as IsPaid89_0_, booking0_.IsPaymentNeeded as IsPayme43_89_0_, booking0_.IsCharter as IsCharter89_0_, booking0_.TransferAdult as Transfe45_89_0_, booking0_.TransferChildren as Transfe46_89_0_, booking0_.TransferBaby as Transfe47_89_0_, booking0_.Invoice as Invoice89_0_, booking0_.CancelPay as CancelPay89_0_, booking0_.GuideOnboard as GuideOn50_89_0_, booking0_.Guide as Guide89_0_, booking0_.Driver as Driver89_0_, booking0_.PaidDate as PaidDate89_0_, booking0_.ComPaidDate as ComPaid54_89_0_, booking0_.TripId as TripId89_0_, booking0_.CruiseId as CruiseId89_0_, booking0_.AgencyId as AgencyId89_0_, booking0_.TransferTo as TransferTo89_0_, booking0_.LockedId as LockedId89_0_, booking0_.Id as formula1_0_, booking0_.CustomBookingId as formula2_0_, booking0_.If (booking0_.CurrencyRate > 0 ) THEN (booking0_.GuideCollect - booking0_.GuideCollectVND/booking0_.CurrencyRate - booking0_.GuideCollectUSD) ELSE booking0_.GuideCollect END as formula3_0_, booking0_.Total - booking0_.GuideCollect - booking0_.PaidBase/booking0_.CurrencyRate - booking0_.Paid as formula4_0_ FROM os_Booking booking0_ WHERE booking0_.Id=?] ---> System.Data.SqlClient.SqlException: Incorrect syntax near the keyword 'If'.
Incorrect syntax near the keyword 'THEN'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj)
   at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at System.Data.SqlClient.SqlDataReader.ConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, DbAsyncResult result)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.System.Data.IDbCommand.ExecuteReader()
   at NHibernate.Impl.BatcherImpl.ExecuteReader(IDbCommand cmd)
   at NHibernate.Loader.Loader.GetResultSet(IDbCommand st, RowSelection selection, ISessionImplementor session)
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies)
   at NHibernate.Loader.Loader.LoadEntity(ISessionImplementor session, Object id, IType identifierType, Object optionalObject, Type optionalEntityName, Object optionalIdentifier, IEntityPersister persister)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.LoadEntity(ISessionImplementor session, Object id, IType identifierType, Object optionalObject, Type optionalEntityName, Object optionalIdentifier, IEntityPersister persister)
   at NHibernate.Loader.Entity.AbstractEntityLoader.Load(ISessionImplementor session, Object id, Object optionalObject, Object optionalId)
   at NHibernate.Loader.Entity.AbstractEntityLoader.Load(Object id, Object optionalObject, ISessionImplementor session)
   at NHibernate.Persister.Entity.AbstractEntityPersister.Load(Object id, Object optionalObject, LockMode lockMode, ISessionImplementor session)
   at NHibernate.Impl.SessionImpl.DoLoad(Type theClass, Object id, Object optionalObject, LockMode lockMode, Boolean checkDeleted)
   at NHibernate.Impl.SessionImpl.DoLoadByClass(Type clazz, Object id, Boolean checkDeleted, Boolean allowProxyCreation)
   at NHibernate.Impl.SessionImpl.Get(Type clazz, Object id)
   at Castle.Facilities.NHibernateIntegration.SessionDelegate.Get(Type clazz, Object id)
   at CMS.Core.DataAccess.CommonDao.GetObjectById(Type type, Int32 id, Boolean allowNull) in D:\Working\Source\ATMBooking\Core\DataAccess\CommonDao.cs:line 45
   at ICommonDaoProxyeff2baaf046e4ed79b87e0810f8cdd43.InvocationGetObjectById_2.InvokeMethodOnTarget()
   at Castle.DynamicProxy.AbstractInvocation.Proceed()
   at Castle.Facilities.AutomaticTransactionManagement.TransactionInterceptor.Intercept(IInvocation invocation)
   at Castle.DynamicProxy.AbstractInvocation.Proceed()
   at ICommonDaoProxyeff2baaf046e4ed79b87e0810f8cdd43.GetObjectById(Type type, Int32 id, Boolean allowNull)
   at Portal.Modules.OrientalSails.SailsModule.BookingGetById(Int32 id)
   at Portal.Modules.OrientalSails.Web.Admin.BookingView.LoadInfo()
   at Portal.Modules.OrientalSails.Web.Admin.BookingView.Page_Load(Object sender, EventArgs e)
2013-08-08 15:47:39,894 [11] ERROR NHibernate.Util.ADOExceptionReporter [(null)] <(null)> - Divide by zero error encountered.
2013-08-08 15:47:39,918 [11] ERROR Portal.Modules.OrientalSails.Web.Admin.BookingView [(null)] <(null)> - Error when Page_Load in BookingView
NHibernate.ADOException: could not load an entity: [Portal.Modules.OrientalSails.Domain.Booking#13089][SQL: SELECT booking0_.Id as Id89_0_, booking0_.Deleted as Deleted89_0_, booking0_.IsApproved as IsApproved89_0_, booking0_.GroupNo as GroupNo89_0_, booking0_.CreatedBy as CreatedBy89_0_, booking0_.CreatedDate as CreatedD6_89_0_, booking0_.ModifiedBy as ModifiedBy89_0_, booking0_.ModifiedDate as Modified8_89_0_, booking0_.ConfirmedBy as Confirme9_89_0_, booking0_.PartnerId as PartnerId89_0_, booking0_.SaleId as SaleId89_0_, booking0_.StartDate as StartDate89_0_, booking0_.EndDate as EndDate89_0_, booking0_.CustomBookingId as CustomB14_89_0_, booking0_.Amended as Amended89_0_, booking0_.Status as Status89_0_, booking0_.AccountingStatus as Account17_89_0_, booking0_.AgencyCode as AgencyCode89_0_, booking0_.TripOption as TripOption89_0_, booking0_.Total as Total89_0_, booking0_.TotalVND as TotalVND89_0_, booking0_.IsVND as IsVND89_0_, booking0_.Commission as Commission89_0_, booking0_.ComUSDpayed as ComUSDp24_89_0_, booking0_.ComVNDPayed as ComVNDP25_89_0_, booking0_.ComRate as ComRate89_0_, booking0_.GuideCollect as GuideCo27_89_0_, booking0_.GuideCollected as GuideCo28_89_0_, booking0_.GuideCollectUSD as GuideCo29_89_0_, booking0_.GuideCollectVND as GuideCo30_89_0_, booking0_.ComPaid as ComPaid89_0_, booking0_.TransferCost as Transfe32_89_0_, booking0_.IsTransferred as IsTrans33_89_0_, booking0_.Paid as Paid89_0_, booking0_.Note as Note89_0_, booking0_.PickupAddress as PickupA36_89_0_, booking0_.DropoffAddress as Dropoff37_89_0_, booking0_.SpecialRequest as Special38_89_0_, booking0_.BookerId as BookerId89_0_, booking0_.CurrencyRate as Currenc40_89_0_, booking0_.PaidBase as PaidBase89_0_, booking0_.IsPaid as IsPaid89_0_, booking0_.IsPaymentNeeded as IsPayme43_89_0_, booking0_.IsCharter as IsCharter89_0_, booking0_.TransferAdult as Transfe45_89_0_, booking0_.TransferChildren as Transfe46_89_0_, booking0_.TransferBaby as Transfe47_89_0_, booking0_.Invoice as Invoice89_0_, booking0_.CancelPay as CancelPay89_0_, booking0_.GuideOnboard as GuideOn50_89_0_, booking0_.Guide as Guide89_0_, booking0_.Driver as Driver89_0_, booking0_.PaidDate as PaidDate89_0_, booking0_.ComPaidDate as ComPaid54_89_0_, booking0_.TripId as TripId89_0_, booking0_.CruiseId as CruiseId89_0_, booking0_.AgencyId as AgencyId89_0_, booking0_.TransferTo as TransferTo89_0_, booking0_.LockedId as LockedId89_0_, booking0_.Id as formula1_0_, booking0_.CustomBookingId as formula2_0_, CASE WHEN (booking0_.CurrencyRate > 0 ) THEN (booking0_.GuideCollect - booking0_.GuideCollectVND/booking0_.CurrencyRate - booking0_.GuideCollectUSD) ELSE booking0_.GuideCollect END as formula3_0_, booking0_.Total - booking0_.GuideCollect - booking0_.PaidBase/booking0_.CurrencyRate - booking0_.Paid as formula4_0_ FROM os_Booking booking0_ WHERE booking0_.Id=?] ---> System.Data.SqlClient.SqlException: Divide by zero error encountered.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj)
   at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at System.Data.SqlClient.SqlDataReader.HasMoreRows()
   at System.Data.SqlClient.SqlDataReader.ReadInternal(Boolean setTimeout)
   at System.Data.SqlClient.SqlDataReader.Read()
   at NHibernate.Driver.NHybridDataReader.Read()
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies)
   at NHibernate.Loader.Loader.LoadEntity(ISessionImplementor session, Object id, IType identifierType, Object optionalObject, Type optionalEntityName, Object optionalIdentifier, IEntityPersister persister)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.LoadEntity(ISessionImplementor session, Object id, IType identifierType, Object optionalObject, Type optionalEntityName, Object optionalIdentifier, IEntityPersister persister)
   at NHibernate.Loader.Entity.AbstractEntityLoader.Load(ISessionImplementor session, Object id, Object optionalObject, Object optionalId)
   at NHibernate.Loader.Entity.AbstractEntityLoader.Load(Object id, Object optionalObject, ISessionImplementor session)
   at NHibernate.Persister.Entity.AbstractEntityPersister.Load(Object id, Object optionalObject, LockMode lockMode, ISessionImplementor session)
   at NHibernate.Impl.SessionImpl.DoLoad(Type theClass, Object id, Object optionalObject, LockMode lockMode, Boolean checkDeleted)
   at NHibernate.Impl.SessionImpl.DoLoadByClass(Type clazz, Object id, Boolean checkDeleted, Boolean allowProxyCreation)
   at NHibernate.Impl.SessionImpl.Get(Type clazz, Object id)
   at Castle.Facilities.NHibernateIntegration.SessionDelegate.Get(Type clazz, Object id)
   at CMS.Core.DataAccess.CommonDao.GetObjectById(Type type, Int32 id, Boolean allowNull) in D:\Working\Source\ATMBooking\Core\DataAccess\CommonDao.cs:line 45
   at ICommonDaoProxya22230f1b2b147aca355a4e33a957448.InvocationGetObjectById_2.InvokeMethodOnTarget()
   at Castle.DynamicProxy.AbstractInvocation.Proceed()
   at Castle.Facilities.AutomaticTransactionManagement.TransactionInterceptor.Intercept(IInvocation invocation)
   at Castle.DynamicProxy.AbstractInvocation.Proceed()
   at ICommonDaoProxya22230f1b2b147aca355a4e33a957448.GetObjectById(Type type, Int32 id, Boolean allowNull)
   at Portal.Modules.OrientalSails.SailsModule.BookingGetById(Int32 id)
   at Portal.Modules.OrientalSails.Web.Admin.BookingView.LoadInfo()
   at Portal.Modules.OrientalSails.Web.Admin.BookingView.Page_Load(Object sender, EventArgs e)
2013-08-08 15:52:27,261 [10] ERROR NHibernate.Util.ADOExceptionReporter [(null)] <(null)> - Divide by zero error encountered.
2013-08-08 15:52:27,289 [10] ERROR Portal.Modules.OrientalSails.Web.Admin.BookingView [(null)] <(null)> - Error when Page_Load in BookingView
NHibernate.ADOException: could not load an entity: [Portal.Modules.OrientalSails.Domain.Booking#13089][SQL: SELECT booking0_.Id as Id89_0_, booking0_.Deleted as Deleted89_0_, booking0_.IsApproved as IsApproved89_0_, booking0_.GroupNo as GroupNo89_0_, booking0_.CreatedBy as CreatedBy89_0_, booking0_.CreatedDate as CreatedD6_89_0_, booking0_.ModifiedBy as ModifiedBy89_0_, booking0_.ModifiedDate as Modified8_89_0_, booking0_.ConfirmedBy as Confirme9_89_0_, booking0_.PartnerId as PartnerId89_0_, booking0_.SaleId as SaleId89_0_, booking0_.StartDate as StartDate89_0_, booking0_.EndDate as EndDate89_0_, booking0_.CustomBookingId as CustomB14_89_0_, booking0_.Amended as Amended89_0_, booking0_.Status as Status89_0_, booking0_.AccountingStatus as Account17_89_0_, booking0_.AgencyCode as AgencyCode89_0_, booking0_.TripOption as TripOption89_0_, booking0_.Total as Total89_0_, booking0_.TotalVND as TotalVND89_0_, booking0_.IsVND as IsVND89_0_, booking0_.Commission as Commission89_0_, booking0_.ComUSDpayed as ComUSDp24_89_0_, booking0_.ComVNDPayed as ComVNDP25_89_0_, booking0_.ComRate as ComRate89_0_, booking0_.GuideCollect as GuideCo27_89_0_, booking0_.GuideCollected as GuideCo28_89_0_, booking0_.GuideCollectUSD as GuideCo29_89_0_, booking0_.GuideCollectVND as GuideCo30_89_0_, booking0_.ComPaid as ComPaid89_0_, booking0_.TransferCost as Transfe32_89_0_, booking0_.IsTransferred as IsTrans33_89_0_, booking0_.Paid as Paid89_0_, booking0_.Note as Note89_0_, booking0_.PickupAddress as PickupA36_89_0_, booking0_.DropoffAddress as Dropoff37_89_0_, booking0_.SpecialRequest as Special38_89_0_, booking0_.BookerId as BookerId89_0_, booking0_.CurrencyRate as Currenc40_89_0_, booking0_.PaidBase as PaidBase89_0_, booking0_.IsPaid as IsPaid89_0_, booking0_.IsPaymentNeeded as IsPayme43_89_0_, booking0_.IsCharter as IsCharter89_0_, booking0_.TransferAdult as Transfe45_89_0_, booking0_.TransferChildren as Transfe46_89_0_, booking0_.TransferBaby as Transfe47_89_0_, booking0_.Invoice as Invoice89_0_, booking0_.CancelPay as CancelPay89_0_, booking0_.GuideOnboard as GuideOn50_89_0_, booking0_.Guide as Guide89_0_, booking0_.Driver as Driver89_0_, booking0_.PaidDate as PaidDate89_0_, booking0_.ComPaidDate as ComPaid54_89_0_, booking0_.TripId as TripId89_0_, booking0_.CruiseId as CruiseId89_0_, booking0_.AgencyId as AgencyId89_0_, booking0_.TransferTo as TransferTo89_0_, booking0_.LockedId as LockedId89_0_, booking0_.Id as formula1_0_, booking0_.CustomBookingId as formula2_0_, CASE WHEN (booking0_.CurrencyRate > 0 ) THEN (booking0_.GuideCollect - booking0_.GuideCollectVND/booking0_.CurrencyRate - booking0_.GuideCollectUSD) ELSE booking0_.GuideCollect END as formula3_0_, booking0_.Total - booking0_.GuideCollect - booking0_.PaidBase/booking0_.CurrencyRate - booking0_.Paid as formula4_0_ FROM os_Booking booking0_ WHERE booking0_.Id=?] ---> System.Data.SqlClient.SqlException: Divide by zero error encountered.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj)
   at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at System.Data.SqlClient.SqlDataReader.HasMoreRows()
   at System.Data.SqlClient.SqlDataReader.ReadInternal(Boolean setTimeout)
   at System.Data.SqlClient.SqlDataReader.Read()
   at NHibernate.Driver.NHybridDataReader.Read()
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies)
   at NHibernate.Loader.Loader.LoadEntity(ISessionImplementor session, Object id, IType identifierType, Object optionalObject, Type optionalEntityName, Object optionalIdentifier, IEntityPersister persister)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.LoadEntity(ISessionImplementor session, Object id, IType identifierType, Object optionalObject, Type optionalEntityName, Object optionalIdentifier, IEntityPersister persister)
   at NHibernate.Loader.Entity.AbstractEntityLoader.Load(ISessionImplementor session, Object id, Object optionalObject, Object optionalId)
   at NHibernate.Loader.Entity.AbstractEntityLoader.Load(Object id, Object optionalObject, ISessionImplementor session)
   at NHibernate.Persister.Entity.AbstractEntityPersister.Load(Object id, Object optionalObject, LockMode lockMode, ISessionImplementor session)
   at NHibernate.Impl.SessionImpl.DoLoad(Type theClass, Object id, Object optionalObject, LockMode lockMode, Boolean checkDeleted)
   at NHibernate.Impl.SessionImpl.DoLoadByClass(Type clazz, Object id, Boolean checkDeleted, Boolean allowProxyCreation)
   at NHibernate.Impl.SessionImpl.Get(Type clazz, Object id)
   at Castle.Facilities.NHibernateIntegration.SessionDelegate.Get(Type clazz, Object id)
   at CMS.Core.DataAccess.CommonDao.GetObjectById(Type type, Int32 id, Boolean allowNull) in D:\Working\Source\ATMBooking\Core\DataAccess\CommonDao.cs:line 45
   at ICommonDaoProxyeed87f3cf863491a8e4b8a98f92f33ca.InvocationGetObjectById_2.InvokeMethodOnTarget()
   at Castle.DynamicProxy.AbstractInvocation.Proceed()
   at Castle.Facilities.AutomaticTransactionManagement.TransactionInterceptor.Intercept(IInvocation invocation)
   at Castle.DynamicProxy.AbstractInvocation.Proceed()
   at ICommonDaoProxyeed87f3cf863491a8e4b8a98f92f33ca.GetObjectById(Type type, Int32 id, Boolean allowNull)
   at Portal.Modules.OrientalSails.SailsModule.BookingGetById(Int32 id)
   at Portal.Modules.OrientalSails.Web.Admin.BookingView.LoadInfo()
   at Portal.Modules.OrientalSails.Web.Admin.BookingView.Page_Load(Object sender, EventArgs e)
2013-08-08 17:00:09,078 [10] ERROR NHibernate.Util.ADOExceptionReporter [(null)] <(null)> - Divide by zero error encountered.
2013-08-08 17:00:09,078 [10] ERROR Portal.Modules.OrientalSails.Web.Admin.PaymentReport [(null)] <(null)> - Error when Page_load in BookingList
NHibernate.ADOException: could not execute query
[ SELECT this_.Id as Id89_2_, this_.Deleted as Deleted89_2_, this_.IsApproved as IsApproved89_2_, this_.GroupNo as GroupNo89_2_, this_.CreatedBy as CreatedBy89_2_, this_.CreatedDate as CreatedD6_89_2_, this_.ModifiedBy as ModifiedBy89_2_, this_.ModifiedDate as Modified8_89_2_, this_.ConfirmedBy as Confirme9_89_2_, this_.PartnerId as PartnerId89_2_, this_.SaleId as SaleId89_2_, this_.StartDate as StartDate89_2_, this_.EndDate as EndDate89_2_, this_.CustomBookingId as CustomB14_89_2_, this_.Amended as Amended89_2_, this_.Status as Status89_2_, this_.AccountingStatus as Account17_89_2_, this_.AgencyCode as AgencyCode89_2_, this_.TripOption as TripOption89_2_, this_.Total as Total89_2_, this_.TotalVND as TotalVND89_2_, this_.IsVND as IsVND89_2_, this_.Commission as Commission89_2_, this_.ComUSDpayed as ComUSDp24_89_2_, this_.ComVNDPayed as ComVNDP25_89_2_, this_.ComRate as ComRate89_2_, this_.GuideCollect as GuideCo27_89_2_, this_.GuideCollected as GuideCo28_89_2_, this_.GuideCollectUSD as GuideCo29_89_2_, this_.GuideCollectVND as GuideCo30_89_2_, this_.ComPaid as ComPaid89_2_, this_.TransferCost as Transfe32_89_2_, this_.IsTransferred as IsTrans33_89_2_, this_.Paid as Paid89_2_, this_.Note as Note89_2_, this_.PickupAddress as PickupA36_89_2_, this_.DropoffAddress as Dropoff37_89_2_, this_.SpecialRequest as Special38_89_2_, this_.BookerId as BookerId89_2_, this_.CurrencyRate as Currenc40_89_2_, this_.PaidBase as PaidBase89_2_, this_.IsPaid as IsPaid89_2_, this_.IsPaymentNeeded as IsPayme43_89_2_, this_.IsCharter as IsCharter89_2_, this_.TransferAdult as Transfe45_89_2_, this_.TransferChildren as Transfe46_89_2_, this_.TransferBaby as Transfe47_89_2_, this_.Invoice as Invoice89_2_, this_.CancelPay as CancelPay89_2_, this_.GuideOnboard as GuideOn50_89_2_, this_.Guide as Guide89_2_, this_.Driver as Driver89_2_, this_.PaidDate as PaidDate89_2_, this_.ComPaidDate as ComPaid54_89_2_, this_.TripId as TripId89_2_, this_.CruiseId as CruiseId89_2_, this_.AgencyId as AgencyId89_2_, this_.TransferTo as TransferTo89_2_, this_.LockedId as LockedId89_2_, this_.Id as formula1_2_, this_.CustomBookingId as formula2_2_, CASE WHEN (this_.CurrencyRate > 0 ) THEN (this_.GuideCollect - this_.GuideCollectVND/this_.CurrencyRate - this_.GuideCollectUSD) ELSE this_.GuideCollect END as formula3_2_, this_.Total - this_.GuideCollect - this_.PaidBase/this_.CurrencyRate - this_.Paid as formula4_2_, trip2_.Id as Id107_0_, trip2_.Deleted as Deleted107_0_, trip2_.CreatedBy as CreatedBy107_0_, trip2_.CreatedDate as CreatedD4_107_0_, trip2_.ModifiedBy as ModifiedBy107_0_, trip2_.ModifiedDate as Modified6_107_0_, trip2_.Name as Name107_0_, trip2_.NumberOfDay as NumberOf8_107_0_, trip2_.WhatToTake as WhatToTake107_0_, trip2_.Itinerary as Itinerary107_0_, trip2_.Inclusions as Inclusions107_0_, trip2_.Exclusions as Exclusions107_0_, trip2_.Description as Descrip13_107_0_, trip2_.Image as Image107_0_, trip2_.NumberOfOptions as NumberO15_107_0_, trip2_.TripCode as TripCode107_0_, trip2_.OrgId as OrgId107_0_, agency1_.Id as Id96_1_, agency1_.Name as Name96_1_, agency1_.Phone as Phone96_1_, agency1_.Address as Address96_1_, agency1_.RoleId as RoleId96_1_, agency1_.SaleId as SaleId96_1_, agency1_.CreatedBy as CreatedBy96_1_, agency1_.ModifiedBy as ModifiedBy96_1_, agency1_.OrgId as OrgId96_1_, agency1_.Fax as Fax96_1_, agency1_.TaxCode as TaxCode96_1_, agency1_.Email as Email96_1_, agency1_.ContractStatus as Contrac13_96_1_, agency1_.Description as Descrip14_96_1_, agency1_.Contract as Contract96_1_, agency1_.Accountant as Accountant96_1_, agency1_.PaymentPeriod as Payment17_96_1_, agency1_.CreatedDate as Created18_96_1_, agency1_.ModifiedDate as Modifie19_96_1_, agency1_.Deleted as Deleted96_1_ FROM os_Booking this_ left outer join os_SailsTrip trip2_ on this_.TripId=trip2_.Id left outer join os_Agency agency1_ on this_.AgencyId=agency1_.Id WHERE (((this_.Deleted = ? and (this_.Status = ? or (this_.Status = ? and this_.CancelPay > ?))) and (this_.StartDate >= ? and this_.StartDate <= ?)) and not this_.IsPaid = ?) ORDER BY this_.StartDate asc ]
Positional parameters:   0 False
  0 Approved
  0 Cancelled
  0 0
  0 8/1/2013 12:00:00 AM
  0 8/31/2013 12:00:00 AM
  0 True
[SQL: SELECT this_.Id as Id89_2_, this_.Deleted as Deleted89_2_, this_.IsApproved as IsApproved89_2_, this_.GroupNo as GroupNo89_2_, this_.CreatedBy as CreatedBy89_2_, this_.CreatedDate as CreatedD6_89_2_, this_.ModifiedBy as ModifiedBy89_2_, this_.ModifiedDate as Modified8_89_2_, this_.ConfirmedBy as Confirme9_89_2_, this_.PartnerId as PartnerId89_2_, this_.SaleId as SaleId89_2_, this_.StartDate as StartDate89_2_, this_.EndDate as EndDate89_2_, this_.CustomBookingId as CustomB14_89_2_, this_.Amended as Amended89_2_, this_.Status as Status89_2_, this_.AccountingStatus as Account17_89_2_, this_.AgencyCode as AgencyCode89_2_, this_.TripOption as TripOption89_2_, this_.Total as Total89_2_, this_.TotalVND as TotalVND89_2_, this_.IsVND as IsVND89_2_, this_.Commission as Commission89_2_, this_.ComUSDpayed as ComUSDp24_89_2_, this_.ComVNDPayed as ComVNDP25_89_2_, this_.ComRate as ComRate89_2_, this_.GuideCollect as GuideCo27_89_2_, this_.GuideCollected as GuideCo28_89_2_, this_.GuideCollectUSD as GuideCo29_89_2_, this_.GuideCollectVND as GuideCo30_89_2_, this_.ComPaid as ComPaid89_2_, this_.TransferCost as Transfe32_89_2_, this_.IsTransferred as IsTrans33_89_2_, this_.Paid as Paid89_2_, this_.Note as Note89_2_, this_.PickupAddress as PickupA36_89_2_, this_.DropoffAddress as Dropoff37_89_2_, this_.SpecialRequest as Special38_89_2_, this_.BookerId as BookerId89_2_, this_.CurrencyRate as Currenc40_89_2_, this_.PaidBase as PaidBase89_2_, this_.IsPaid as IsPaid89_2_, this_.IsPaymentNeeded as IsPayme43_89_2_, this_.IsCharter as IsCharter89_2_, this_.TransferAdult as Transfe45_89_2_, this_.TransferChildren as Transfe46_89_2_, this_.TransferBaby as Transfe47_89_2_, this_.Invoice as Invoice89_2_, this_.CancelPay as CancelPay89_2_, this_.GuideOnboard as GuideOn50_89_2_, this_.Guide as Guide89_2_, this_.Driver as Driver89_2_, this_.PaidDate as PaidDate89_2_, this_.ComPaidDate as ComPaid54_89_2_, this_.TripId as TripId89_2_, this_.CruiseId as CruiseId89_2_, this_.AgencyId as AgencyId89_2_, this_.TransferTo as TransferTo89_2_, this_.LockedId as LockedId89_2_, this_.Id as formula1_2_, this_.CustomBookingId as formula2_2_, CASE WHEN (this_.CurrencyRate > 0 ) THEN (this_.GuideCollect - this_.GuideCollectVND/this_.CurrencyRate - this_.GuideCollectUSD) ELSE this_.GuideCollect END as formula3_2_, this_.Total - this_.GuideCollect - this_.PaidBase/this_.CurrencyRate - this_.Paid as formula4_2_, trip2_.Id as Id107_0_, trip2_.Deleted as Deleted107_0_, trip2_.CreatedBy as CreatedBy107_0_, trip2_.CreatedDate as CreatedD4_107_0_, trip2_.ModifiedBy as ModifiedBy107_0_, trip2_.ModifiedDate as Modified6_107_0_, trip2_.Name as Name107_0_, trip2_.NumberOfDay as NumberOf8_107_0_, trip2_.WhatToTake as WhatToTake107_0_, trip2_.Itinerary as Itinerary107_0_, trip2_.Inclusions as Inclusions107_0_, trip2_.Exclusions as Exclusions107_0_, trip2_.Description as Descrip13_107_0_, trip2_.Image as Image107_0_, trip2_.NumberOfOptions as NumberO15_107_0_, trip2_.TripCode as TripCode107_0_, trip2_.OrgId as OrgId107_0_, agency1_.Id as Id96_1_, agency1_.Name as Name96_1_, agency1_.Phone as Phone96_1_, agency1_.Address as Address96_1_, agency1_.RoleId as RoleId96_1_, agency1_.SaleId as SaleId96_1_, agency1_.CreatedBy as CreatedBy96_1_, agency1_.ModifiedBy as ModifiedBy96_1_, agency1_.OrgId as OrgId96_1_, agency1_.Fax as Fax96_1_, agency1_.TaxCode as TaxCode96_1_, agency1_.Email as Email96_1_, agency1_.ContractStatus as Contrac13_96_1_, agency1_.Description as Descrip14_96_1_, agency1_.Contract as Contract96_1_, agency1_.Accountant as Accountant96_1_, agency1_.PaymentPeriod as Payment17_96_1_, agency1_.CreatedDate as Created18_96_1_, agency1_.ModifiedDate as Modifie19_96_1_, agency1_.Deleted as Deleted96_1_ FROM os_Booking this_ left outer join os_SailsTrip trip2_ on this_.TripId=trip2_.Id left outer join os_Agency agency1_ on this_.AgencyId=agency1_.Id WHERE (((this_.Deleted = ? and (this_.Status = ? or (this_.Status = ? and this_.CancelPay > ?))) and (this_.StartDate >= ? and this_.StartDate <= ?)) and not this_.IsPaid = ?) ORDER BY this_.StartDate asc] ---> System.Data.SqlClient.SqlException: Divide by zero error encountered.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj)
   at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at System.Data.SqlClient.SqlDataReader.HasMoreRows()
   at System.Data.SqlClient.SqlDataReader.ReadInternal(Boolean setTimeout)
   at System.Data.SqlClient.SqlDataReader.Read()
   at NHibernate.Driver.NHybridDataReader.Read()
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies)
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.DoList(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.ListIgnoreQueryCache(ISessionImplementor session, QueryParameters queryParameters)
   at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet querySpaces, IType[] resultTypes)
   at NHibernate.Impl.SessionImpl.Find(CriteriaImpl criteria, IList results)
   at NHibernate.Impl.SessionImpl.Find(CriteriaImpl criteria)
   at NHibernate.Impl.CriteriaImpl.List()
   at Portal.Modules.OrientalSails.DataAccess.SailsDao.BookingSearch(ICriterion criterion, String customer, Int32 blocked, Order order)
   at ISailsDaoProxycd9342e78b914c3fa983fc1164fbd073.InvocationBookingSearch_11.InvokeMethodOnTarget()
   at Castle.DynamicProxy.AbstractInvocation.Proceed()
   at Castle.Facilities.AutomaticTransactionManagement.TransactionInterceptor.Intercept(IInvocation invocation)
   at Castle.DynamicProxy.AbstractInvocation.Proceed()
   at ISailsDaoProxycd9342e78b914c3fa983fc1164fbd073.BookingSearch(ICriterion criterion, String customer, Int32 blocked, Order order)
   at Portal.Modules.OrientalSails.SailsModule.BookingGetByCriterion(ICriterion criterion, Order order, Int32& count, Int32 pageSize, Int32 pageIndex, Boolean tripped, User user)
   at Portal.Modules.OrientalSails.Web.Admin.PaymentReport.GetData(Int32& count)
   at Portal.Modules.OrientalSails.Web.Admin.PaymentReport.GetDataSource()
   at Portal.Modules.OrientalSails.Web.Admin.PaymentReport.Page_Load(Object sender, EventArgs e)
2013-08-08 17:01:02,815 [5] ERROR NHibernate.Util.ADOExceptionReporter [(null)] <(null)> - Divide by zero error encountered.
2013-08-08 17:01:02,816 [5] ERROR Portal.Modules.OrientalSails.Web.Admin.BookingView [(null)] <(null)> - Error when Page_Load in BookingView
NHibernate.ADOException: could not load an entity: [Portal.Modules.OrientalSails.Domain.Booking#13089][SQL: SELECT booking0_.Id as Id89_0_, booking0_.Deleted as Deleted89_0_, booking0_.IsApproved as IsApproved89_0_, booking0_.GroupNo as GroupNo89_0_, booking0_.CreatedBy as CreatedBy89_0_, booking0_.CreatedDate as CreatedD6_89_0_, booking0_.ModifiedBy as ModifiedBy89_0_, booking0_.ModifiedDate as Modified8_89_0_, booking0_.ConfirmedBy as Confirme9_89_0_, booking0_.PartnerId as PartnerId89_0_, booking0_.SaleId as SaleId89_0_, booking0_.StartDate as StartDate89_0_, booking0_.EndDate as EndDate89_0_, booking0_.CustomBookingId as CustomB14_89_0_, booking0_.Amended as Amended89_0_, booking0_.Status as Status89_0_, booking0_.AccountingStatus as Account17_89_0_, booking0_.AgencyCode as AgencyCode89_0_, booking0_.TripOption as TripOption89_0_, booking0_.Total as Total89_0_, booking0_.TotalVND as TotalVND89_0_, booking0_.IsVND as IsVND89_0_, booking0_.Commission as Commission89_0_, booking0_.ComUSDpayed as ComUSDp24_89_0_, booking0_.ComVNDPayed as ComVNDP25_89_0_, booking0_.ComRate as ComRate89_0_, booking0_.GuideCollect as GuideCo27_89_0_, booking0_.GuideCollected as GuideCo28_89_0_, booking0_.GuideCollectUSD as GuideCo29_89_0_, booking0_.GuideCollectVND as GuideCo30_89_0_, booking0_.ComPaid as ComPaid89_0_, booking0_.TransferCost as Transfe32_89_0_, booking0_.IsTransferred as IsTrans33_89_0_, booking0_.Paid as Paid89_0_, booking0_.Note as Note89_0_, booking0_.PickupAddress as PickupA36_89_0_, booking0_.DropoffAddress as Dropoff37_89_0_, booking0_.SpecialRequest as Special38_89_0_, booking0_.BookerId as BookerId89_0_, booking0_.CurrencyRate as Currenc40_89_0_, booking0_.PaidBase as PaidBase89_0_, booking0_.IsPaid as IsPaid89_0_, booking0_.IsPaymentNeeded as IsPayme43_89_0_, booking0_.IsCharter as IsCharter89_0_, booking0_.TransferAdult as Transfe45_89_0_, booking0_.TransferChildren as Transfe46_89_0_, booking0_.TransferBaby as Transfe47_89_0_, booking0_.Invoice as Invoice89_0_, booking0_.CancelPay as CancelPay89_0_, booking0_.GuideOnboard as GuideOn50_89_0_, booking0_.Guide as Guide89_0_, booking0_.Driver as Driver89_0_, booking0_.PaidDate as PaidDate89_0_, booking0_.ComPaidDate as ComPaid54_89_0_, booking0_.TripId as TripId89_0_, booking0_.CruiseId as CruiseId89_0_, booking0_.AgencyId as AgencyId89_0_, booking0_.TransferTo as TransferTo89_0_, booking0_.LockedId as LockedId89_0_, booking0_.Id as formula1_0_, booking0_.CustomBookingId as formula2_0_, CASE WHEN (booking0_.CurrencyRate > 0 ) THEN (booking0_.GuideCollect - booking0_.GuideCollectVND/booking0_.CurrencyRate - booking0_.GuideCollectUSD) ELSE booking0_.GuideCollect END as formula3_0_, booking0_.Total - booking0_.GuideCollect - booking0_.PaidBase/booking0_.CurrencyRate - booking0_.Paid as formula4_0_ FROM os_Booking booking0_ WHERE booking0_.Id=?] ---> System.Data.SqlClient.SqlException: Divide by zero error encountered.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj)
   at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at System.Data.SqlClient.SqlDataReader.HasMoreRows()
   at System.Data.SqlClient.SqlDataReader.ReadInternal(Boolean setTimeout)
   at System.Data.SqlClient.SqlDataReader.Read()
   at NHibernate.Driver.NHybridDataReader.Read()
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies)
   at NHibernate.Loader.Loader.LoadEntity(ISessionImplementor session, Object id, IType identifierType, Object optionalObject, Type optionalEntityName, Object optionalIdentifier, IEntityPersister persister)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.LoadEntity(ISessionImplementor session, Object id, IType identifierType, Object optionalObject, Type optionalEntityName, Object optionalIdentifier, IEntityPersister persister)
   at NHibernate.Loader.Entity.AbstractEntityLoader.Load(ISessionImplementor session, Object id, Object optionalObject, Object optionalId)
   at NHibernate.Loader.Entity.AbstractEntityLoader.Load(Object id, Object optionalObject, ISessionImplementor session)
   at NHibernate.Persister.Entity.AbstractEntityPersister.Load(Object id, Object optionalObject, LockMode lockMode, ISessionImplementor session)
   at NHibernate.Impl.SessionImpl.DoLoad(Type theClass, Object id, Object optionalObject, LockMode lockMode, Boolean checkDeleted)
   at NHibernate.Impl.SessionImpl.DoLoadByClass(Type clazz, Object id, Boolean checkDeleted, Boolean allowProxyCreation)
   at NHibernate.Impl.SessionImpl.Get(Type clazz, Object id)
   at Castle.Facilities.NHibernateIntegration.SessionDelegate.Get(Type clazz, Object id)
   at CMS.Core.DataAccess.CommonDao.GetObjectById(Type type, Int32 id, Boolean allowNull) in D:\Working\Source\ATMBooking\Core\DataAccess\CommonDao.cs:line 45
   at ICommonDaoProxyeed87f3cf863491a8e4b8a98f92f33ca.InvocationGetObjectById_2.InvokeMethodOnTarget()
   at Castle.DynamicProxy.AbstractInvocation.Proceed()
   at Castle.Facilities.AutomaticTransactionManagement.TransactionInterceptor.Intercept(IInvocation invocation)
   at Castle.DynamicProxy.AbstractInvocation.Proceed()
   at ICommonDaoProxyeed87f3cf863491a8e4b8a98f92f33ca.GetObjectById(Type type, Int32 id, Boolean allowNull)
   at Portal.Modules.OrientalSails.SailsModule.BookingGetById(Int32 id)
   at Portal.Modules.OrientalSails.Web.Admin.BookingView.LoadInfo()
   at Portal.Modules.OrientalSails.Web.Admin.BookingView.Page_Load(Object sender, EventArgs e)
2013-08-08 17:02:29,294 [6] ERROR NHibernate.Util.ADOExceptionReporter [(null)] <(null)> - Divide by zero error encountered.
2013-08-08 17:02:29,318 [6] ERROR Portal.Modules.OrientalSails.Web.Admin.BookingView [(null)] <(null)> - Error when Page_Load in BookingView
NHibernate.ADOException: could not load an entity: [Portal.Modules.OrientalSails.Domain.Booking#13089][SQL: SELECT booking0_.Id as Id89_0_, booking0_.Deleted as Deleted89_0_, booking0_.IsApproved as IsApproved89_0_, booking0_.GroupNo as GroupNo89_0_, booking0_.CreatedBy as CreatedBy89_0_, booking0_.CreatedDate as CreatedD6_89_0_, booking0_.ModifiedBy as ModifiedBy89_0_, booking0_.ModifiedDate as Modified8_89_0_, booking0_.ConfirmedBy as Confirme9_89_0_, booking0_.PartnerId as PartnerId89_0_, booking0_.SaleId as SaleId89_0_, booking0_.StartDate as StartDate89_0_, booking0_.EndDate as EndDate89_0_, booking0_.CustomBookingId as CustomB14_89_0_, booking0_.Amended as Amended89_0_, booking0_.Status as Status89_0_, booking0_.AccountingStatus as Account17_89_0_, booking0_.AgencyCode as AgencyCode89_0_, booking0_.TripOption as TripOption89_0_, booking0_.Total as Total89_0_, booking0_.TotalVND as TotalVND89_0_, booking0_.IsVND as IsVND89_0_, booking0_.Commission as Commission89_0_, booking0_.ComUSDpayed as ComUSDp24_89_0_, booking0_.ComVNDPayed as ComVNDP25_89_0_, booking0_.ComRate as ComRate89_0_, booking0_.GuideCollect as GuideCo27_89_0_, booking0_.GuideCollected as GuideCo28_89_0_, booking0_.GuideCollectUSD as GuideCo29_89_0_, booking0_.GuideCollectVND as GuideCo30_89_0_, booking0_.ComPaid as ComPaid89_0_, booking0_.TransferCost as Transfe32_89_0_, booking0_.IsTransferred as IsTrans33_89_0_, booking0_.Paid as Paid89_0_, booking0_.Note as Note89_0_, booking0_.PickupAddress as PickupA36_89_0_, booking0_.DropoffAddress as Dropoff37_89_0_, booking0_.SpecialRequest as Special38_89_0_, booking0_.BookerId as BookerId89_0_, booking0_.CurrencyRate as Currenc40_89_0_, booking0_.PaidBase as PaidBase89_0_, booking0_.IsPaid as IsPaid89_0_, booking0_.IsPaymentNeeded as IsPayme43_89_0_, booking0_.IsCharter as IsCharter89_0_, booking0_.TransferAdult as Transfe45_89_0_, booking0_.TransferChildren as Transfe46_89_0_, booking0_.TransferBaby as Transfe47_89_0_, booking0_.Invoice as Invoice89_0_, booking0_.CancelPay as CancelPay89_0_, booking0_.GuideOnboard as GuideOn50_89_0_, booking0_.Guide as Guide89_0_, booking0_.Driver as Driver89_0_, booking0_.PaidDate as PaidDate89_0_, booking0_.ComPaidDate as ComPaid54_89_0_, booking0_.TripId as TripId89_0_, booking0_.CruiseId as CruiseId89_0_, booking0_.AgencyId as AgencyId89_0_, booking0_.TransferTo as TransferTo89_0_, booking0_.LockedId as LockedId89_0_, booking0_.Id as formula1_0_, booking0_.CustomBookingId as formula2_0_, booking0_.Total - booking0_.GuideCollect - booking0_.PaidBase/booking0_.CurrencyRate - booking0_.Paid as formula3_0_ FROM os_Booking booking0_ WHERE booking0_.Id=?] ---> System.Data.SqlClient.SqlException: Divide by zero error encountered.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj)
   at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at System.Data.SqlClient.SqlDataReader.HasMoreRows()
   at System.Data.SqlClient.SqlDataReader.ReadInternal(Boolean setTimeout)
   at System.Data.SqlClient.SqlDataReader.Read()
   at NHibernate.Driver.NHybridDataReader.Read()
   at NHibernate.Loader.Loader.DoQuery(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies)
   at NHibernate.Loader.Loader.DoQueryAndInitializeNonLazyCollections(ISessionImplementor session, QueryParameters queryParameters, Boolean returnProxies)
   at NHibernate.Loader.Loader.LoadEntity(ISessionImplementor session, Object id, IType identifierType, Object optionalObject, Type optionalEntityName, Object optionalIdentifier, IEntityPersister persister)
   --- End of inner exception stack trace ---
   at NHibernate.Loader.Loader.LoadEntity(ISessionImplementor session, Object id, IType identifierType, Object optionalObject, Type optionalEntityName, Object optionalIdentifier, IEntityPersister persister)
   at NHibernate.Loader.Entity.AbstractEntityLoader.Load(ISessionImplementor session, Object id, Object optionalObject, Object optionalId)
   at NHibernate.Loader.Entity.AbstractEntityLoader.Load(Object id, Object optionalObject, ISessionImplementor session)
   at NHibernate.Persister.Entity.AbstractEntityPersister.Load(Object id, Object optionalObject, LockMode lockMode, ISessionImplementor session)
   at NHibernate.Impl.SessionImpl.DoLoad(Type theClass, Object id, Object optionalObject, LockMode lockMode, Boolean checkDeleted)
   at NHibernate.Impl.SessionImpl.DoLoadByClass(Type clazz, Object id, Boolean checkDeleted, Boolean allowProxyCreation)
   at NHibernate.Impl.SessionImpl.Get(Type clazz, Object id)
   at Castle.Facilities.NHibernateIntegration.SessionDelegate.Get(Type clazz, Object id)
   at CMS.Core.DataAccess.CommonDao.GetObjectById(Type type, Int32 id, Boolean allowNull) in D:\Working\Source\ATMBooking\Core\DataAccess\CommonDao.cs:line 45
   at ICommonDaoProxyc8a0766c8b1441b3a9f95b613987f84d.InvocationGetObjectById_2.InvokeMethodOnTarget()
   at Castle.DynamicProxy.AbstractInvocation.Proceed()
   at Castle.Facilities.AutomaticTransactionManagement.TransactionInterceptor.Intercept(IInvocation invocation)
   at Castle.DynamicProxy.AbstractInvocation.Proceed()
   at ICommonDaoProxyc8a0766c8b1441b3a9f95b613987f84d.GetObjectById(Type type, Int32 id, Boolean allowNull)
   at Portal.Modules.OrientalSails.SailsModule.BookingGetById(Int32 id)
   at Portal.Modules.OrientalSails.Web.Admin.BookingView.LoadInfo()
   at Portal.Modules.OrientalSails.Web.Admin.BookingView.Page_Load(Object sender, EventArgs e)
